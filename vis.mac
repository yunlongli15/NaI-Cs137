# vis.mac - 优化可视化设置
/vis/open OGL 600x600-0+0
/vis/viewer/set/autoRefresh false
/vis/verbose errors

# 绘制几何
/vis/drawVolume

# 设置视图
/vis/viewer/set/viewpointThetaPhi 90. 0.
/vis/viewer/set/lightsVector -1 0 0
/vis/viewer/zoom 1.5

# 设置样式 - 让探测器更明显
/vis/viewer/set/style surface
/vis/viewer/set/auxiliaryEdge true

# 设置颜色 - 让探测器更突出
/vis/geometry/set/colour World 0 0.9 0.9 0.9 0.3   # 半透明浅灰色房间
/vis/geometry/set/colour NaICan 0 0.7 0.7 0.7 1.0   # 灰色探测器外壳
/vis/geometry/set/colour NaICrystal 0 1.0 0.0 0.0 1.0  # 红色晶体

# 只显示在探测器中的轨迹
/vis/filtering/trajectories/create/attributeFilter
/vis/filtering/trajectories/attributeFilter-0/setAttribute IMag
/vis/filtering/trajectories/attributeFilter-0/addInterval 1.0 1000.0 m

# 或者只显示在晶体中的轨迹（更精确的方法）
#/vis/filtering/trajectories/create/volumeFilter
#/vis/filtering/trajectories/volumeFilter-0/add NaICrystal

# 添加轨迹
/vis/scene/add/trajectories smooth
/vis/modeling/trajectories/create/drawByParticleID
/vis/modeling/trajectories/drawByParticleID-0/set gamma green
/vis/modeling/trajectories/drawByParticleID-0/set e- blue
/vis/modeling/trajectories/drawByParticleID-0/set e+ red

# 设置轨迹样式
/vis/modeling/trajectories/create/drawByCharge
/vis/modeling/trajectories/drawByCharge-0/default/setDrawStepPts true
/vis/modeling/trajectories/drawByCharge-0/default/setStepPtsSize 2

# 添加击中点
/vis/scene/add/hits

# 坐标轴
/vis/scene/add/axes 0 0 0 0.5 m

# 设置刷新
/vis/viewer/set/autoRefresh true
/vis/verbose warnings
